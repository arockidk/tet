<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="9MiFm_O_{lU2,!,_Sd@r">direction</variable><variable id="+0!ggM~_,=T;7HnO-)nM">apple_pos</variable><variable id="N,h6-^=[2PQN%a{Yg0q4">frames_since_eaten</variable></variables><block type="pxt-on-start" id="=Pjql([9ahtZ:o[kuiJd" x="0" y="0"><statement name="HANDLER"><block type="typescript_statement" id="6HD:i2O.~XZk}%){TrUR" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let eaten_apple = false" numlines="1" declaredvars="eaten_apple"></mutation><next><block type="typescript_statement" id="`c[LxC(hDGim[9aWlVSn" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let to_draw: Vector2[] = []" numlines="1" declaredvars="to_draw"></mutation><next><block type="typescript_statement" id=".#-/AH=`:DQPs~l+p)IA" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="interface Vector2 {" line1="    x: number," line2="    y: number" line3="}" numlines="4"></mutation><next><block type="typescript_statement" id="!.4qhj3l%-`U9Z[$.#BC" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="enum Dir {" line1="    North = 0," line2="    East," line3="    South," line4="    West" line5="}" numlines="6"></mutation><next><block type="typescript_statement" id="kfBsk)`+b7q0ODrv*fnK" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="function out_of_bounds(pos: Vector2): boolean {" line1="    if (pos.x &lt; 0 || pos.x &gt; 4) {" line2="        return false;" line3="    }" line4="    if (pos.y &lt; 0 || pos.y &gt; 4) {" line5="        return false;" line6="    }" line7="    return true;" line8="}" numlines="9"></mutation><next><block type="typescript_statement" id="bLZysZ^,mr:7-*(Fb6KR" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="function serialize_vec(vec: Vector2) {" line1="    return vec.x.toString() + &quot;,&quot; + vec.y.toString();" line2="}" numlines="3"></mutation><next><block type="typescript_statement" id="R5#{-}kx6d9N{UJS)(+3" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let head = {x: 2, y: 4};" numlines="1" declaredvars="head"></mutation><next><block type="variables_set" id="jK}%Hr-2|PCV,~Hfp$Fz"><field name="VAR" id="+0!ggM~_,=T;7HnO-)nM">apple_pos</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="function_call_output" id="ojYX(0/JFopm,E%+ZHF8"><mutation name="create_apple" functionid="fn2vtahu|v6tgT53SQE)"></mutation></block></value><next><block type="typescript_statement" id="?~)PB4`}C1{;9(LZJbPo" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let direction: Dir = Dir.North;" numlines="1" declaredvars="direction"></mutation><next><block type="variables_set" id="oyEfb)#fdNd{EF*3Sjeg"><field name="VAR" id="N,h6-^=[2PQN%a{Yg0q4">frames_since_eaten</field><value name="VALUE"><shadow type="math_number" id="rZ{V-Bie54I_J~5^OW6?"><field name="NUM">1</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="device_button_event" id="v^DtrI5V~9`auZliOOap" x="543" y="0"><field name="NAME">Button.AB</field><statement name="HANDLER"><block type="typescript_statement" id="h;Sw4k/^t%Lt$yaKBF,_" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="head.x = 2;" numlines="1"></mutation><next><block type="typescript_statement" id="ceM-ag*`5~49=ga|lQgm" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="head.y = 4;" numlines="1"></mutation><next><block type="typescript_statement" id="jTn?q%#CVuiDTa{./NC1" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="basic.forever(function () {" line1="        eaten_apple = false;" line2="        serial.writeNumber(frames_since_eaten);" line3="" line4="        " line5="        basic.clearScreen()" line6="        if (direction == Dir.North) {" line7="            head.y -= 1;" line8="        } else if (direction == Dir.East) {" line9="            head.x += 1;" line10="        } else if (direction == Dir.South) {" line11="            head.y += 1;" line12="        } else if (direction == Dir.West) {" line13="            head.x -= 1;" line14="        }" line15="        for (let block of to_draw) {" line16="            if (serialize_vec(block) == serialize_vec(apple_pos)) {" line17="                eaten_apple = true;" line18="                apple_pos = create_apple();" line19="               " line20="            }" line21="        }" line22="        if (!eaten_apple) {" line23="            to_draw = to_draw.slice(1, to_draw.length)" line24="            " line25="        } else {" line26="            // serial.writeLine(&quot;eaten apple&quot;);" line27="        }" line28="        " line29="        to_draw.push(create_vec2(head.x, head.y));" line30="        serial.writeLine(&quot;----------&quot;);" line31="        // serial.writeNumber(to_draw.length);" line32="        for (let block2 of to_draw) {" line33="            serial.writeLine(serialize_vec(block2));" line34="            led.plot(block2.x, block2.y)" line35="        }" line36="        led.plot(apple_pos.x, apple_pos.y)" line37="        pause(1000);" line38="    })" numlines="39"></mutation></block></next></block></next></block></statement></block><block type="device_button_event" id="K3@4s.js!JOE^_CjVtPT" x="1210" y="0"><field name="NAME">Button.A</field><statement name="HANDLER"><block type="variables_change" id="=;#NL8Y%U(=|O?Ujg~ek"><field name="VAR" id="9MiFm_O_{lU2,!,_Sd@r">direction</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="}M(nFv-iL[TyOcGaXGgZ"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="WP85hyQ(9c6Q#)*FJJb!"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="math_number" id="qRDPETHu}!077GM![:mH"><field name="NUM">1</field></shadow></value></block></value><next><block type="controls_if" id="~7;~RP^h)LGqc%a!7b/W"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="Q=?%9v/#1Tyfn!R0Bs,r"><field name="OP">LT</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="(yh,TJ/F0)s6S?CIs+QY"><field name="VAR" id="9MiFm_O_{lU2,!,_Sd@r">direction</field></block></value><value name="B"><shadow type="math_number" id="fn,RC.(vVL).[J!}aa-{"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="variables_set" id="RKFT2qGrT)zt-O_KNa|$"><field name="VAR" id="9MiFm_O_{lU2,!,_Sd@r">direction</field><value name="VALUE"><shadow type="math_number" id="CoD?4s7PCOumR`n4ho44"><field name="NUM">3</field></shadow></value></block></statement></block></next></block></statement></block><block type="device_button_event" id="lT,do^(*m`rk.UuR1?{l" x="1645" y="0"><field name="NAME">Button.B</field><statement name="HANDLER"><block type="variables_change" id=".G]+KvlZrKV4wdgh+THz"><field name="VAR" id="9MiFm_O_{lU2,!,_Sd@r">direction</field><value name="VALUE"><shadow type="math_number" id="EmBR^JucWHHO8ptHw2eN"><field name="NUM">1</field></shadow></value><next><block type="controls_if" id="yShET;5gQ]i-_G!Hs!Rs"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="%}KKbvoHdl*bQ]phE8|q"><field name="OP">GT</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="4l1oqd9;u1)s1()(WQz2"><field name="VAR" id="9MiFm_O_{lU2,!,_Sd@r">direction</field></block></value><value name="B"><shadow type="math_number" id=")CHj?dRQC]3}{5@5j0Nm"><field name="NUM">3</field></shadow></value></block></value><statement name="DO0"><block type="variables_set" id="INnUo$oF/l-K]NfikF6{"><field name="VAR" id="9MiFm_O_{lU2,!,_Sd@r">direction</field><value name="VALUE"><shadow type="math_number" id="1S#mZkbxT,-|~4H.PV^Y"><field name="NUM">0</field></shadow></value></block></statement></block></next></block></statement></block><block type="function_definition" id="{Vs}Ih9=Qx;bR:eEs}i8" x="2077" y="0"><mutation name="create_apple" functionid="fn2vtahu|v6tgT53SQE)"></mutation><field name="function_name">create_apple</field><statement name="STACK"><block type="function_return" id="@Rf}Ir/{hX#fkYH!r0wR"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="function_call_output" id="b.:Bi#F`1~#bLN1$ffTM"><mutation name="create_vec2" functionid="?-@.X~omVvO~wQwoL?p@"><arg name="x" id="dhr2c9s4sj5pbqxfbtcak" type="number"></arg><arg name="y" id="mwwktqlbx1ejhp0ajvi4" type="number"></arg></mutation><value name="dhr2c9s4sj5pbqxfbtcak"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="device_random" id="Cnm`v0g0*!Sn4xf7ZTAe"><value name="min"><shadow type="math_number" id="EnfZoBB$GdXRGbCXEBff"><field name="NUM">0</field></shadow></value><value name="limit"><shadow type="math_number" id="Zu1IKFI@5.iWR.%#W9:F"><field name="NUM">4</field></shadow></value></block></value><value name="mwwktqlbx1ejhp0ajvi4"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="device_random" id="8nGhPZ@H|RG_svFJ4B~f"><value name="min"><shadow type="math_number" id="T8aT4gZ^hl2k{!M-=h?6"><field name="NUM">0</field></shadow></value><value name="limit"><shadow type="math_number" id="mcG$0Jp4FtRLARmE9E#_"><field name="NUM">4</field></shadow></value></block></value></block></value></block></statement></block><block type="function_definition" id=";d,C:up/z7L0EZdH,~?U" x="0" y="1789"><mutation name="death" functionid="wHIu*MovS.}N9$Jb5I=Y"></mutation><field name="function_name">death</field><statement name="STACK"><block type="device_show_leds" id="RDTGiik7SfGl!AWU;S2i"><field name="LEDS">`
        # . . . # 
        . # . # . 
        . . # . . 
        . # . # . 
        # . . . #
        `</field></block></statement></block><block type="function_definition" id="^wjY-nbxHWorK=ucZ=NX" x="231" y="1789"><mutation name="create_vec2" functionid="?-@.X~omVvO~wQwoL?p@"><arg name="x" id="dhr2c9s4sj5pbqxfbtcak" type="number"></arg><arg name="y" id="mwwktqlbx1ejhp0ajvi4" type="number"></arg></mutation><field name="function_name">create_vec2</field><value name="dhr2c9s4sj5pbqxfbtcak"><shadow type="argument_reporter_number" id=":D{!Vx~!|Fxsop?pmC#$"><field name="VALUE">x</field></shadow></value><value name="mwwktqlbx1ejhp0ajvi4"><shadow type="argument_reporter_number" id="v.C]d(e?`8swA,LOR_^^"><field name="VALUE">y</field></shadow></value><statement name="STACK"><block type="function_return" id="XN~+`|%GrXP:cW]MNp?c"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="typescript_expression" id="OB.+-2hr)q=.6AGLxgp/" editable="false"><field name="EXPRESSION">{
        x: x,
        y: y
    }</field></block></value></block></statement></block></xml>